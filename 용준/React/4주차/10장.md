# 웹 스토리지 이용하기

## 웹 스토리지

- 웹 브라우저가 제공하는 데이터베이스

### 웹 스토리지가 필요한 이유

- 리액트 앱의 State나 변수에 저장된 데이터는 브라우저의 탭에 임시로 보관하기 때문에 탭을 종료하거나 새로고침하면 사라짐
- 데이터를 사라지지 않게 하려면 데이터베이스같은 별도의 저장 공간이 있어야 함
- 서버가 없는 환경에서 웹 스토리지를 이용하면 됨

### 웹 스토리지를 소개합니다

- 웹 스토리지는 쿠키 기능과 매우 비슷함
- 키와 값 쌍으로 이루어진 데이터를 저장함
- 웹 스토리지는 저장 방식에 따라 로컬 스토리지와 세션 스토리지로 구분함

#### 로컬 스토리지(Local Storage)

- 별도 라이브러리 설치 없이 window 객체를 이용하는 방식 (`window.localStorage` 명령 사용)
- 로컬 스토리지에 저장한 데이터는 브라우저를 종료해도 유지됨 (반영구적인 보관)
- 로컬 스토리지는 도메인별로 생성할 수 있고, 주소가 다르면 해당 도메인의 로컬 스토리지에 접근할 수 없음
- 도메인 주소가 같으면 같은 로컬 스토리지를 사용할 수 있음

#### 세션 스토리지(Session Storage)

- 별도 라이브러리 설치 없이 window 객체를 이용하는 방식 (`window.sessionStorage` 명령 사용)
- 탭 단위로 데이터를 보관하는 방식이라 탭을 종료하면 데이터도 삭제됨
- 하지만 새로고침이 발생해도 탭을 종료하지 않는 이상 데이터는 삭제되지 않음

### 로컬 스토리지

```js
/**
 * 데이터 생성 / 수정
 */
localStorage.setItem("key", value);

// value가 참조형 객체라면 JSON.stringify 메서드 이용
localStorage.setItem("key", JSON.stringify(value));

/**
 * 데이터 꺼내기
 */
localStorage.getItem("key");

// value가 JSON.stringify 메서드로 객체 -> 문자열 변환을 했다면, JSON.parse를 통해 원래 상태로 돌려야 함
const data = JSON.parse(localStorage.getItem("key"));

// JSON.parse에 전달하는 값이 undefined면 오류가 발생하기 때문에 getItem으로 꺼낸 값이 undefined인지 먼저 검사해야 함
const rawData = localStorage.getItem("key");
if (rawData) {
  const data = JSON.parse(rawData);
}

/**
 * 데이터 지우기
 */
localStorage.removeItem("key");
```

### 세션 스토리지

```js
/**
 * 데이터 생성 / 수정
 */
sessionStorage.setItem("key", value);

// value가 참조형 객체라면 JSON.stringify 메서드 이용
sessionStorage.setItem("key", JSON.stringify(value));

/**
 * 데이터 꺼내기
 */
sessionStorage.getItem("key");

// value가 JSON.stringify 메서드로 객체 -> 문자열 변환을 했다면, JSON.parse를 통해 원래 상태로 돌려야 함
const data = JSON.parse(sessionStorage.getItem("key"));

// JSON.parse에 전달하는 값이 undefined면 오류가 발생하기 때문에 getItem으로 꺼낸 값이 undefined인지 먼저 검사해야 함
const rawData = sessionStorage.getItem("key");
if (rawData) {
  const data = JSON.parse(rawData);
}

/**
 * 데이터 지우기
 */
sessionStorage.removeItem("key");
```
