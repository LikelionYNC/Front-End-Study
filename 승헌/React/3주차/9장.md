## 9장 컴포넌트 트리에 데이터 공급하기

---

## Context를 사용하는 이유

context를 사용하는 까닭은 Props Drilling 문제를 해결하기 위해서다. Props Drilling 문제는 리액트 컴포넌트 계층 구조에서 컴포넌트 간에 값을 전달할 때 발생한다.

**Context란?**

Context는 문맥이라는 뜻으로 쓰인다. 리액트에서 Context는 문맥 아래에 있는 컴포넌트 그룹에 데이터를 공급하는 기능이라는 의미로 사용된다. Context를 이용하면 단계마다 일일이 Props를 전달하지 않고도 컴포넌트 트리 전역에 데이터를 공급할 수 있어 Props Drilling 문제를 간단히 해결할 수 있다.

**ContextAPI**

ContextAPI는 Context를 만들고 다루는 리액트 기능이다. React.createContext를 이용하면 새로운 Context를 만들 수 있다.

**Context에 데이터 공급하기**

Context에서 데이터를 공급하려면 Context.Provider 기능을 사용해야 한다. Context.Provider는 Context 객체에 기본으로 포함된 컴포넌트이다. useContext라는 리액트 훅을 사용하면 Context가 공급하는 데이터를 불러온다.

```jsx
const TodoContext = React.createContext();

<TodoContext.Provider value={{ todo, onCreate, onUpdate, onDelete }}>
  <TodoEditor onCreate={onCreate} />
  <TodoList todo={todo} onUpdate={onUpdate} onDelete={onDelete} />
</TodoContext.Provider>;
```

## 페이지 라우팅

**라우팅이란?**

라우팅은 경로를 의미하는 Route와 진행을 뜻하는 Ing가 합쳐진 단어로, ‘경롤를 지정하는 과정'이라는 뜻이다.

**페이지 라우팅이란?**

페이지 라우팅은 요청에 따라 적절한 페이지를 반환하는 일련의 과정이다.

**리액트의 페이지 라우팅**

페이지 라우팅의 구현은 웹 페이지를 어디서 만드느냐에 따라 서버 사이드 렌더링과 클라이언트 사이드 렌더링 두 가지로 구분한다. 리액트는 이 두 방법 중 브라우저에서 페이지를 만드는 클라이언트 사이드 렌더링 방식을 채택한다.

**서버 사이드 렌더링**

서버 사이드 렌더링은 검색 엔진을 최적화하며, 처음 접속할 때 속도가 빠르다는 장점이 있다. 반면 사용자가 페이지를 이동할 때마다 서버가 새로운 페이지를 이동할 때마다 서버가 새로운 페이지를 생성해 제공하려면 많은 연산을 수행하게 된다.

따라서 수많은 요청이 동시에 이루어지는 서비스라면 서버에 부하가 걸릴 위험성이 높다 그리고 페이지를 이동할 때마다 브라우저는 서버가 제공하는 페이지를 기다려야하기 때문에 속도가 느려진다는 단점이 있다.

**클라이언트 사이드 렌더링**

리액트 앱은 html 파일이 하나뿐인 단일 페이지 애플리케이션(Single Page Application)이다. html 파일이 하나이기 때문에 서버 사이드가 아닌 클라이언트 사이드 렌더링으로 페이지를 라우팅한다.

클라이언트 사이드 렌더링의 핵심은 사용자가 보는 페이지를 웹 서버가 아닌 브라우저가 완성한다는 점이다. 브라우저는 처음 접속할 때만 서버에게 데이터를 요청하며, 페이지를 이동할 때는 별도의 요청을 하지 않는다.

클라이언트 사이드 렌더링에서는 서버가 html 파일과 자바스크립트 애플리케이션을 함께 제공하기 때문에, 처음 사이트에 접속할 때는 서버 사이드 렌더링보다 속도가 느리다. 그러나 페이지를 이동할 때는 브라우저에서 페이지를 직접 교체하므로 속도가 훨씬 빠르다.

## 리액트 라우터로 페이지 라우팅하기

**리액트 라우터란?**

리액트 라우터는 Remix 팀에서 제작한 오픈소스 라이브러리이다. 이 라우터를 이용하면 단 몇 줄의 코드만으로 여러 페이지로 구성된 리액트 앱을 간단히 구축할 수 있다.

`npm i react-router-dom`

## 리액트 라우터로 동적 경로 라우팅하기

동적 경로란 특정 아이템을 나타내는 id처럼 값이 변하는 요소를 URL에 포함하는 경우를 말합니다. 예를 들어 [감정 일기장] 프로젝트에서 일기 아이템의 id가 3인 상세 페이지의 URL을, ‘/diary/3’ 같은 동적 경로 형식으로 표기할 수 있다. 동적 경로는 흔히 쇼핑물의 일부 상품 페이지에서 특정 데이터를 조회하는 주소 표현으로 사용한다.

**동적 경로의 종류**

동적 경로를 표현하는 방법에는 URL 파라미터와 쿼리 스트링 두 가지가 있다.

**URL 파라미터**

URL 파라미터는 URL에 유동적인 값을 넣는 방법이다. 보통 유동적인 값은 중괄호로 표기한다. 이 방법으로 특정 id를 포함한 상세 페이지의 URL은 `https://localhost:3000/diary/{id}` 로 표기한다.

**쿼리 스트링**

쿼리 스트링은 물음표뒤에 key=value 문법으로 URL에 유동적인 값을 포함하는 방법이다. `https://localhost:3000?sort=latest`
