## 10장 웹 스토리지

---

## 웹 스토리지

웹 스토리지는 한마디로 웹 브라우저가 제공하는 데이터베이스이다.

**웹 스토리지가 필요한 이유**

브라우저는 사용자가 여러 페이지를 동시에 탐색하도록 복수의 탭을 지원한다. 이때 탭을 새로고침하면 브라우저는 해당 탭에서 보관하던 데이터를 삭제하고 페이지를 다시 불러온다. 리액트 앱의 State나 변수에 저장된 데이터는 브라우저의 탭에 보관한다. 따라서 탭을 없애거나 새로고침하면 데이터는 모두 사라진다

**웹 스토리지**

브라우저에는 쿠키, 웹 스토리지, indexedDB 등에 활용할 다양한 저장 공간이 있다. 웹 스토리지는 서버가 아닌 클라이언트, 즉 사용자 PC를 활용해 데이터를 저장하는 HTML5의 새로운 기능이다.

**로컬 스토리지**

별도 라이브러리 설치 없이 window 객체를 이용하는 방식으로, window.localStorage 명령을 사용한다. 이때 localStorage라는 이름으로 변수나 함수를 선언하지 않는다면, window는 생략할 수 있다. 로컬 스토리지에 저장한 데이터는 브라우저를 종료해도 유지된다. 또한 로컬스토리지는 도메인별로도 생성할 수 있는데, 주소가 다르면 해당 도메인의 로컬 스토리지에는 접근할 수 없다

- 데이터 생성/수정

  - localStorage의 메서드 setItem을 호출해 인수로 key와 value를 전달하면 된다.
    `localStorage.setItem("Key", value);`
  - 로컬 스토리지는 값을 문자열로 저장한다. 저장하려는 value가 참조형 객체라면 JSON.stringify메서드를 사용해야 한다.
    `localStorage.setItem("Key", JSON.stringify(value));`

- 데이터 꺼내기
  - 꺼내려는 데이터의 value가 앞서 JSON.stringify 메서드로 객체를 문자열로 변환한 값이라면 JSON.parse 메서드로 문자열을 원래의 객체 상태로 되돌릴 수 있다.
    `const data = JSON.parse(localStorage.getItem("Key"));`
  - getitem 메서드를 호출해 인수로 key를 전달하면 된다. 그럼 getitem 메서드는 key와 일치하는 value를 반환한다. 이때도 Key는 반드시 문자열이어야 한다.
    `localStorage.getItem("key");`
- 데이터 지우기
  - 로컬 스토리지에 저장한 데이터를 지울 때는 removeItem 메서드를 호출한다.

**세션 스토리지**

window.sessionStorage 명령으로 사용한다. 다만 세션 스토리지는 탭 단위로 데이터를 보관하는 방식으로 탭을 종료하면 데이터도 삭제된다. 당연히 브라우저를 종료하면 세션 스토리지에 보관된 데이터 역시 모두 삭제된다.

탭을 종료 하지 않으면 직접 데이터를 삭제하지 않는 한, 데이터를 계속 보관할 수 있다. 즉 새로고침이 발생해도 탭을 종료하지 않는 이상 데이터는 삭제되지 않는다.

- 데이터 생성/수정

  - 데이터가 객체라면 JSON.stringify 메서드로 문자열로 변환해 저장

  `sessionStorage.setItem("Key", JSON.stringify(value));`

  - 로컬 스토리지와 동일하게 setItem 메서드를 호출해 인수로 key와 value를 전달

  `sessionStorage.setItem("Key", value);`

- 데이터 꺼내기

  - 로컬 스토리지와 동일

  `sessionStorage.getItem("key");`

- 데이터 지우기
  - 로컬 스토리지와 동일
