
# 제네레이터와 async/await

## 제너레이터란?

제네레이터는 ES6에 도입된 특별한 종류의 함수임. 
일반 함수와 달리 실행을 중간에 멈췄다가 나중에 다시 시작할 수 있는 기능이 있음.

1. 함수를 호출한 코드에게 함수의 실행 제어권을 넘겨줄 수 있음.
2. 호출한 쪽과 함수 실행 상태나 값을 서로 주고받을 수 있음.
3. 함수를 호출하면 바로 코드가 실행되지 않고 제네레이터 객체라는 것을 반환함.

## 제너레이터 함수의 정의

제네레이터 함수를 만들 때는 function* 키워드를 사용함. 
그리고 함수 안에는 **yield**라는 키워드가 하나 이상 포함되어야 함. 
이 두 가지를 제외하면 일반 함수 정의 방식과 비슷함.

## 제너레이터 객체

제네레이터 함수를 호출하면 코드가 바로 실행되는 것이 아니라 제네레이터 객체가 생성되어 반환됨. 이 객체는 반복 가능한(이터러블) 객체이면서 동시에 반복자(이터레이터)의 역할도 함.

## 제너레이터의 일시 중시와 재개

yield 키워드를 만나면 제네레이터 함수의 실행이 잠시 멈춤. 이때 yield 뒤에 있는 값이나 표현식 결과가 함수를 호출한 쪽으로 반환되고, 함수의 제어권도 호출한 쪽으로 넘어감.

제네레이터 객체의 next() 메서드를 호출하면 멈췄던 함수가 다시 실행됨. 다음 yield를 만날 때까지 코드가 진행되고 다시 멈춤.

## async/await

제네레이터를 사용하면 비동기 작업을 마치 순서대로 실행되는 동기 작업처럼 보이게 만들 수 있었지만, 코드가 다소 복잡해지고 읽기 어려워지는 단점이 있었음.

이런 문제를 해결하고 비동기 처리를 더 쉽게 하려고 ES8(ECMAScript 2017)에서 async/await 문법이 도입됨. 이를 통해 비동기 코드를 훨씬 간결하고 가독성 좋게 작성할 수 있게 되었음.

### async 함수

async 키워드를 함수 선언 앞에 붙여서 정의함. await 키워드는 반드시 async 함수 안에서만 사용할 수 있음.

async 함수는 항상 프로미스를 반환함. 함수 안에서 값을 그냥 return하더라도, async 함수는 그 값을 resolve하는 프로미스를 암묵적으로 만들어 반환함.


### await 키워드

await 키워드는 프로미스 앞에 붙여서 사용함.

await는 뒤에 오는 프로미스가 최종 결과(settled 상태, 즉 성공 또는 실패)를 낼 때까지 해당 async 함수의 실행을 일시 중지시키고 기다림.

프로미스가 성공(resolve)하면, await 표현식은 그 프로미스의 성공 값을 반환함. 프로미스가 실패(reject)하면 예외가 발생함.
